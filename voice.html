<!doctype html>
<html lang="en">
<head>
    <link rel="icon" href="favicon-16x16.png" type="image/x-icon">
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ScanLink Studio — Voice</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--accent:#0f47d3;--bg:#f4f6fc}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
body{background:var(--bg);color:#111;min-height:100vh}
header{background:#fff;padding:14px 22px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px rgba(0,0,0,0.05)}
.brand{font-weight:700;font-size:22px;color:var(--accent)}
nav a{margin-left:12px;text-decoration:none;color:#222;font-weight:600}
.container{max-width:800px;margin:26px auto;padding:18px}
.card{background:#fff;padding:18px;border-radius:12px;box-shadow:0 8px 22px rgba(0,0,0,0.06)}
button{padding:10px 14px;border-radius:8px;border:none;background:linear-gradient(90deg,var(--accent),#6a00ff);color:#fff;font-weight:700;cursor:pointer}
.small{font-size:13px;color:#666;margin-top:10px}
.log{margin-top:12px;padding:12px;background:#f8fafc;border-radius:8px;border:1px solid #eef2ff}
.footer{margin-top:30px;text-align:center;padding:18px;background:#fff}
</style>
</head>
<body>

<header>
  <div class="brand">ScanLink Studio</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="generate.html">Generate</a>
  </nav>
</header>

<div class="container">
  <div class="card">
    <h2 style="color:var(--accent)">Voice Commands</h2>
    <p class="small">Use voice to control the app. Examples: "generate https://example.com", "open generate with hello".</p>

    <div style="display:flex;gap:10px;margin-top:12px">
      <button id="startBtn">Start Listening</button>
      <button id="stopBtn" style="background:#ef4444">Stop</button>
    </div>

    <div class="log" id="log">No activity yet.</div>

    <div style="margin-top:12px" class="small">Note: Browser must support Web Speech API. Prefer Chrome for best results.</div>
  </div>
</div>

<div class="footer">© <span id="y"></span> ScanLink Studio</div>

<script>
document.getElementById('y').textContent = new Date().getFullYear();

const logEl = document.getElementById('log');
function log(s){ logEl.innerText = s; }

let recog = null;
if(!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
  log('SpeechRecognition not supported in this browser.');
} else {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recog = new SR();
  recog.lang = 'en-US';
  recog.interimResults = false;
  recog.onresult = (e) => {
    const t = e.results[0][0].transcript;
    log('Heard: ' + t);
    const cmd = t.toLowerCase().trim();
    if(cmd.startsWith('generate ')){
      const rest = cmd.replace(/^generate\s+/,'');
      location.href = 'generate.html?prefill=' + encodeURIComponent(rest);
    } else if(cmd.startsWith('open generate') || cmd.startsWith('open generator')){
      const rest = cmd.replace(/open generate(ion)?\s*/,'');
      location.href = 'generate.html?prefill=' + encodeURIComponent(rest);
    } else if(cmd.startsWith('open ')){
      const page = cmd.replace(/^open\s+/,'').trim();
      // try to navigate basic names
      if(page.includes('scan')) location.href='scan.html';
      else if(page.includes('batch')) location.href='batch.html';
      else if(page.includes('short')) location.href='shortlink.html';
      else log('Unknown page: '+page);
    } else {
      log('Command not recognized: ' + t);
    }
  };
  recog.onerror = (e)=> log('Error: '+ (e.error||e.message));
}

document.getElementById('startBtn').addEventListener('click', ()=>{ if(recog){ recog.start(); log('Listening...'); } else log('SpeechRecognition not available'); });
document.getElementById('stopBtn').addEventListener('click', ()=>{ if(recog){ recog.stop(); log('Stopped'); } });
</script>
</body>
</html>

